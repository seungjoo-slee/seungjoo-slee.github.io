<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sarah — Portfolio</title>
  <meta name="description" content="Portfolio — Digital experience, brand & conversion, visual direction, motion, editorial." />
  <style>
    :root{
      --bg:#f6f3f8;
      --panel:#ffffff;
      --text:#1a1a1f;
      --muted:#6d6d78;
      --line:rgba(120,90,140,.15);
      --accent:#e9d5f5; /* soft lavender */
      --accent-strong:#d8b4f8;
      --radius:14px;
      --max:1000px;
      --sans: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
      --serif: Georgia, "Times New Roman", serif;
    }

    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:var(--sans);
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
      scroll-behavior:smooth;
    }

    a{text-decoration:none; color:inherit;}
    .wrap{max-width:var(--max); margin:0 auto; padding:60px 20px 100px;}

    /* Navigation */
    .topbar{
      position:sticky;
      top:0;
      background:rgba(246,243,248,.9);
      backdrop-filter:blur(6px);
      border-bottom:1px solid var(--line);
      z-index:10;
    }
    .topbar .inner{
      max-width:var(--max);
      margin:0 auto;
      padding:16px 20px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .brand .name{
      font-weight:600;
      font-size:14px;
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    .nav a{
      margin-left:18px;
      font-size:13px;
      color:var(--muted);
    }
    .nav a:hover{color:var(--text);}
    .nav a.active{color:var(--text); font-weight:600;}

    /* Hero */
    .hero{
      padding:80px 0 60px;
      text-align:left;
    }

    h1{
      font-family:var(--serif);
      font-size:clamp(42px,5vw,64px);
      font-weight:600;
      margin:20px 0;
      letter-spacing:-0.03em;
    }

    .sub{
      max-width:600px;
      font-size:16px;
      color:var(--muted);
    }

    .btn{
      display:inline-block;
      margin-top:24px;
      padding:10px 18px;
      border-radius:999px;
      border:1px solid var(--line);
      font-size:13px;
      background:white;
    }
    .btn.primary{
      background:var(--accent);
      border-color:var(--accent-strong);
    }
    .btn:hover{opacity:.8;}

    /* Sections */
    section{margin-top:100px;}

    .sectionHead h2{
  font-size:12px;
  letter-spacing:.2em;
  text-transform:uppercase;
  color:var(--muted);
  margin-bottom:30px;
}

.metaHeading{
  font-size:12px;
  letter-spacing:.2em;
  text-transform:uppercase;
  color:var(--muted);
  font-weight:600;
  margin:40px 0 14px;
}

    /* Grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:40px;
    }

    .tile{
      background:var(--panel);
      border-radius:var(--radius);
      overflow:hidden;
      border:1px solid var(--line);
      transition:transform .2s ease;
      cursor:pointer;
    }
    .tile:hover{transform:translateY(-4px);}

    .thumb{
      display:none;
    }

    .tileBody{padding:20px;}

    .tileTitle{
      font-family:var(--serif);
      font-size:18px;
      margin:0 0 10px;
    }

    .tileDesc{
      font-size:14px;
      color:var(--muted);
    }

    /* Modal */
    .modalBack{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.3);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
      z-index:9999;
    }
    .modalBack.show{display:flex;}

    .modal{
      background:white;
      max-width:700px;
      width:100%;
      padding:40px;
      border-radius:var(--radius);
      border:1px solid var(--line);
    }

    .modalBack{
  overflow:auto;          /* allow scrolling if modal is taller than screen */
  align-items:flex-start; /* don’t force vertical centering */
}

.modal{
  max-height: calc(100vh - 40px);
  overflow:auto;
}

.mediaEmbed{
  width:100%;
  height:380px !important;
  border:0;
}

    footer{
      margin-top:120px;
      font-size:12px;
      color:var(--muted);
      text-align:center;
    }

    @media (max-width:700px){
      .hero{padding:60px 0 40px;}
      section{margin-top:80px;}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="inner">
      <a class="brand" href="#top" aria-label="Home">
        <div class="mark" aria-hidden="true"></div>
        <div>
          <div class="name">Sarah Lee</div>
          <div class="tag" id="oneLine">Designing fashion & beauty experiences—strategy, aesthetics, storytelling.</div>
        </div>
      </a>

      <nav class="nav" aria-label="Primary">
        <a href="#work">Work</a>
        <a href="#thesis">Thesis</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="cta">
        <a class="btn" href="#work">View work</a>
        <a class="btn primary" href="#contact">Get in touch</a>
      </div>
    </div>
  </header>

  <main class="wrap" id="top">
    <div class="hero">
      <div class="card heroMain">
        <div class="kicker">USC Marshall • Business Administration • Los Angeles | Seoul • slee6182@usc.edu </div>
        <h1>Sarah Lee's Portfolio</h1>
        <p class="sub">
          I work across UI/UX, photography, motion, and writing to shape how people perceive and feel a brand.
          Right now, I’m especially drawn to the fashion & beauty space—where taste, identity, and storytelling matter.
        </p>
        <div class="heroActions">
          <a class="btn primary" href="#work">Explore featured work</a>
          <a class="btn" href="#about">About me</a>
          <a class="btn" href="#contact">Contact</a>
        </div>
      </div>

      <aside class="card metaCard">
  <div class="metaTop">
    <div>
      <h4 class="metaHeading">Focus</h4>
      <div class="metaValue">Fashion/Beauty • Brand Perception • Experience</div>
    </div>
    <div>
      <h4 class="metaHeading">Strengths</h4>
      <div class="metaValue">Visual direction • Clarity • Detail</div>
    </div>
  </div>
</aside>

    </div>

    <section id="work">
      <div class="sectionHead">
        <div>
          <h2>Work</h2>
          <p>Curated projects across design, image, motion, and writing.</p>
        </div>
        <div class="controls" aria-label="Work controls">
          <div class="search" title="Search projects">
            <span aria-hidden="true">⌕</span>
            <input id="searchInput" type="search" placeholder="Search projects (e.g., UI, beauty, video, writing)" oninput="setSearch(this.value)" />
          </div>
          <button class="filterBtn" id="viewToggle" onclick="toggleView()" title="Toggle list/grid view">List view</button>
        </div>
        <div class="filters" aria-label="Filter work">
          <button class="filterBtn active" data-filter="All" onclick="setFilter('All')">All</button>
          <button class="filterBtn" data-filter="Digital Experience" onclick="setFilter('Digital Experience')">Digital Experience</button>
          <button class="filterBtn" data-filter="Brand & Conversion" onclick="setFilter('Brand & Conversion')">Brand & Conversion</button>
          <button class="filterBtn" data-filter="Visual Direction" onclick="setFilter('Visual Direction')">Visual Direction</button>
          <button class="filterBtn" data-filter="Motion" onclick="setFilter('Motion')">Motion</button>
          <button class="filterBtn" data-filter="Editorial" onclick="setFilter('Editorial')">Editorial</button>
        </div>
      </div>

      <div class="grid" id="grid"></div>
    </section>

    <section id="thesis">
      <div class="sectionHead">
        <h2>Thesis</h2>
      </div>
      <div class="grid" style="grid-template-columns: 1fr; gap: 18px;">
        <article class="tile" style="cursor:default;">
          <div class="thumb" style="height: 140px;"></div>
          <div class="tileBody">
            <h3 class="tileTitle">Analysis of Social Problems from Homelessness and Proposed Solutions</h3>
            <p class="tileDesc">Comparative policy analysis (South Korea & U.S.) examining government support systems, nonprofit roles, and policy blind spots, with proposed improvements.</p>
            <div class="pillRow">
              <span class="pill">Research</span>
              <span class="pill">Policy</span>
              <span class="pill">Writing</span>
            </div>
            <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
              <a class="btn primary" href="thesis.pdf" target="_blank" rel="noopener noreferrer">Open thesis (PDF)</a>
              <a class="btn" href="#" onclick="alert('If this doesn\'t open, keep the DOCX in the same folder as index.html, or export it to PDF and link that file instead.'); return false;">Troubleshoot</a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <section id="about">
      <div class="sectionHead">
        <div>
          <h2>About</h2>
          <p>What I do, how I think, and where I’m headed.</p>
        </div>
      </div>

      <div class="about">
        <div class="card aboutCard">
          <h3>Positioning</h3>
          <p>
            I’m a Business Administration student at USC Marshall exploring fashion and beauty through the lens of
            brand and experience design. I’m drawn to work where aesthetics are not decoration, but a form of communication.
          </p>
        </div>

        <div class="card aboutCard">
          <h3>Approach</h3>
          <p>
            I care about cohesion: tone, hierarchy, rhythm, and the small details that make something feel expensive.
            Whether I’m designing an interface, editing a video, or writing an article, the goal is the same—clarity with taste.
          </p>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="sectionHead">
        <div>
          <h2>Contact</h2>
        </div>
      </div>

      <div class="card" style="padding:18px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;">
        <div style="min-width:240px">
          <div style="color:var(--muted); font-size:13px;">Email</div>
          <div style="font-weight:650; margin-top:6px;">slee6182@usc.edu</div>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn primary" href="mailto:slee6182@usc.edu">Email me</a>
          <a class="btn" href="https://www.linkedin.com/in/seung-joo-sarah-lee-332930318" target="_blank" rel="noopener noreferrer">LinkedIn</a>
          <a class="btn" href="(2027) Lee, Seung Joo, Marshall Resume.pdf" target="_blank" rel="noopener noreferrer">Resume</a>
        </div>
      </div>
    </section>

    <footer>
      <div>© <span id="year"></span> Seung Joo(Sarah) Lee. All rights reserved.</div>
    </footer>
  </main>

  <!-- Modal -->
  <div class="modalBack" id="modalBack" role="dialog" aria-modal="true" aria-label="Project details" onclick="backdropClose(event)">
    <div class="modal" role="document">
      <div class="modalHeader">
        <div>
          <h3 id="mTitle">Project title</h3>
          <div class="small" id="mSubtitle">Short description</div>
        </div>
        <button class="iconBtn" onclick="closeModal()" aria-label="Close">✕</button>
      </div>
      <div class="modalBody">
        <div class="modalGrid">
          <div class="mediaBox">
            <div class="mediaHero" id="mediaHero"></div>
            <iframe class="mediaEmbed" id="mediaEmbed" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
          <div class="mediaBox">
            <div class="contentBox">
              <h4>Overview</h4>
              <p id="mBody">Details go here.</p>
              <ul class="bullets" id="mBullets"></ul>
              <div class="links" id="mLinks"></div>
              <div class="modalNav" aria-label="Project navigation">
                <button class="btn" id="prevBtn" onclick="openPrev()">← Previous</button>
                <button class="btn" id="nextBtn" onclick="openNext()">Next →</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== Content model ======
    // Replace placeholders with real content and links.

    const PROJECTS = [
      {
        id: 'bondit-ux',
        featured: true,
        size: 'big',
        category: 'Digital Experience',
        title: 'Bondit — Anonymous Open Chat Feature (UI/UX Case Study)',
        desc: 'Research-to-prototype work focused on engagement drop-off, safety, and discoverability for a college social app.',
        tags: ['UI/UX', 'User research', 'Prototyping'],
        body: 'UI/UX case study from my internship at Bondit Community Inc. I conducted heuristic evaluation + user research, translated insights into flows, and iterated from sketches to high-fidelity prototypes for an “anonymous open chat” feature.',
        bullets: [
          'Heuristic evaluation + prioritized UX issues across key screens.',
          'Personas + research insights → functional/non-functional requirements.',
          'Sketched flows, built lo-fi → hi-fi prototypes, and documented usability findings.'
        ],
        links: [
          { label: 'Case study (PDF)', url: 'bondit-case-study.pdf', note: 'Keep the PDF in the same folder as index.html' },
          { label: 'Figma prototype', url: 'https://www.figma.com/design/AH8ZY6eNXCjPCDF5RLajGs/Bondit-Low-fidelity---high-fidelity-prototype---Sarah-Lee?node-id=0-1&t=HseJZPlPSX2h0pdv-1' }
        ],
        embed: ''
      },
      {
  id: 'airbnb-1',
  featured: true,
  size: 'big',
  category: 'Brand & Conversion',
  title: 'Airbnb Listing — Positioning & Occupancy Strategy',
  desc: 'Structured listing presentation and guest experience framing, achieving 97% occupancy (Aug–Dec 2025).',
  tags: ['Positioning', 'Conversion', 'Hospitality'],
  body: 'Managed and positioned a short-term rental listing with focus on clarity, trust signaling, and visual sequencing. Treated the listing as a brand touchpoint—refining photo order, descriptive hierarchy, and guest communication to strengthen perceived value and booking consistency.',
  bullets: [
    'Maintained 97% occupancy from August–December 2025 (4 vacant days out of 153).',
    'Reordered image sequence to prioritize emotional impact and first-scroll clarity.',
    'Refined headline and description for scan-ability and value articulation.',
    'Strengthened trust cues (amenities clarity, expectations, access details).'
  ],
  links: [
    { label: 'Booking Calendar (Aug–Dec 2025)', url: 'airbnb-booking.png' }
  ],
  embed: ''
},
      {
  id: 'photo-1',
  featured: true,
  size: 'normal',
  category: 'Visual Direction',
  title: 'Photography',
  desc: 'A cinematic study of urban stillness and density—where wires, light, and landscape intersect.',
  tags: ['Photography', 'Urban', 'Atmosphere'],
  body: 'A curated series capturing the quiet tension between infrastructure and nature. Shot across Japan and Korea, the work explores dusk light, overhead wires, compressed streets, and moments of stillness within density. The framing emphasizes layering—foreground obstruction, mid-ground life, distant landscape—to create depth and mood.',
  bullets: [
    'Focus on atmospheric lighting (dusk, overcast, diffused daylight).',
    'Compositional layering: foreground framing → mid-ground activity → distant anchor.',
    'Contrast between urban density and natural landscape.',
    'Color treated subtly to preserve cinematic realism.'
  ],
        links: [
          { label: 'Camera Work (Google Drive)', url: 'https://drive.google.com/drive/folders/1S03MQ5UAOnl_5BxxV7DpN9FAIGQMp_Gs?usp=sharing' },
        ],
        embed: ''
      },
      {
  id: 'video-1',
  featured: false,
  size: 'normal',
  category: 'Motion',
  title: 'Video Editing — Selected Works',
  desc: 'A curated playlist of short-form beauty, fashion, and travel edits.',
  tags: ['Video', 'Editing', 'Motion'],
  body: 'A collection of selected video edits emphasizing pacing, rhythm, typography restraint, and visual storytelling. All pieces are included in the embedded playlist below.',
  bullets: [
    'Short-form horizontal and vertical edits.',
    'Intentional pacing and visual hierarchy.',
    'Consistent, restrained typographic system.'
  ],
  links: [],
  embed: 'https://www.youtube-nocookie.com/embed/videoseries?list=PLGpB2j5mTDm56QEohiTG6EN6mu2Mxo_YR'
},  

{
  id: 'editorial-1',
  featured: false,
  size: 'normal',
  category: 'Editorial',
  title: 'Selected Writing (Korean)',
  desc: 'Published reporting on culture and community—covering U.S. youth events, K-pop influence, and local nonprofit impact.',
  tags: ['Journalism', 'Culture', 'Community'],
  body: 'A curated set of articles in Korean highlighting my ability to research, write clearly, and communicate social and cultural stories with context and tone control.',
  bullets: [
    'Generated an average readership of 32,000+ views per article.',
    'Reported community-focused stories with clear structure and readable pacing.',
    'Covered culture and identity topics across the U.S. and Korea-facing audiences.',
    'Balanced factual reporting with approachable, audience-friendly language.'
  ],
  links: [
    { label: 'California: NGOs working to address homelessness', url: 'https://youthpress.net/xe/kypnews_article_society/675077' },
    { label: 'U.S. theme parks: events for high school students', url: 'https://youthpress.net/xe/kypnews_article_culture/678560' },
    { label: 'K-pop influence growing among U.S. teens', url: 'https://youthpress.net/xe/kypnews_article_society/682343' },
    { label: 'Volunteer: backpack donation drive at Ambassador HS', url: 'https://youthpress.net/xe/kypnews_article_politics/689096' }
  ],
  embed: ''
}
    ];

    // ====== State ======
    const grid = document.getElementById('grid');
    const modalBack = document.getElementById('modalBack');
    const mediaEmbed = document.getElementById('mediaEmbed');
    const mediaHero = document.getElementById('mediaHero');

    let currentFilter = 'All';
    let searchQuery = '';
    let viewMode = 'grid'; // 'grid' | 'list'

    // ====== Helpers ======
    function norm(s){ return (s || '').toString().toLowerCase().trim(); }

    function matchesSearch(p){
      const q = norm(searchQuery);
      if (!q) return true;
      const hay = [p.title, p.desc, p.category, ...(p.tags||[])].map(norm).join(' ');
      return hay.includes(q);
    }

    function visibleProjects(){
      return PROJECTS
        .filter(p => currentFilter === 'All' ? true : p.category === currentFilter)
        .filter(matchesSearch);
    }

    // ====== Render ======
    function createTile(p){
      const el = document.createElement('article');
      el.className = `tile ${p.size === 'big' ? 'big' : ''}`;
      el.dataset.category = p.category;
      el.dataset.id = p.id;
      el.tabIndex = 0;
      el.setAttribute('role', 'button');
      el.setAttribute('aria-label', `${p.title} — open details`);

      const thumb = document.createElement('div');
      thumb.className = 'thumb';

      if (p.image){
        thumb.style.backgroundImage = `linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.02)), url('${p.image}')`;
        thumb.style.backgroundSize = 'cover';
        thumb.style.backgroundPosition = 'center';
      }

      const body = document.createElement('div');
      body.className = 'tileBody';

      const title = document.createElement('h3');
      title.className = 'tileTitle';
      title.textContent = p.title;

      const desc = document.createElement('p');
      desc.className = 'tileDesc';
      desc.textContent = p.desc;

      const pills = document.createElement('div');
      pills.className = 'pillRow';
      const cat = document.createElement('span');
      cat.className = 'pill';
      cat.textContent = p.category;
      pills.appendChild(cat);
      (p.tags || []).slice(0,2).forEach(t => {
        const s = document.createElement('span');
        s.className = 'pill';
        s.textContent = t;
        pills.appendChild(s);
      });

      body.appendChild(title);
      body.appendChild(desc);
      body.appendChild(pills);

      el.appendChild(thumb);
      el.appendChild(body);

      el.addEventListener('click', () => openModal(p));
      el.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openModal(p);
        }
      });

      return el;
    }

    function render(){
      grid.classList.toggle('list', viewMode === 'list');
      const viewToggle = document.getElementById('viewToggle');
      if (viewToggle) viewToggle.textContent = viewMode === 'list' ? 'Grid view' : 'List view';

      grid.innerHTML = '';

      let visible = visibleProjects();

      // Sort: featured first, then big, then title
      visible = visible.sort((a,b) => {
        const fa = a.featured ? 0 : 1;
        const fb = b.featured ? 0 : 1;
        if (fa !== fb) return fa - fb;
        const sa = a.size === 'big' ? 0 : 1;
        const sb = b.size === 'big' ? 0 : 1;
        if (sa !== sb) return sa - sb;
        return a.title.localeCompare(b.title);
      });

      // Curated hero order on All (only when no search)
      if (currentFilter === 'All' && !searchQuery){
        const customOrder = ['bondit-ux','airbnb-1','photo-1'];
        visible.sort((a,b) => {
          const ia = customOrder.indexOf(a.id);
          const ib = customOrder.indexOf(b.id);
          if (ia !== -1 || ib !== -1){
            if (ia === -1) return 1;
            if (ib === -1) return -1;
            return ia - ib;
          }
          const fa = a.featured ? 0 : 1;
          const fb = b.featured ? 0 : 1;
          if (fa !== fb) return fa - fb;
          const sa = a.size === 'big' ? 0 : 1;
          const sb = b.size === 'big' ? 0 : 1;
          if (sa !== sb) return sa - sb;
          return a.title.localeCompare(b.title);
        });
      }

      // Empty state
      if (!visible.length){
        const empty = document.createElement('div');
        empty.className = 'card';
        empty.style.padding = '16px';
        empty.innerHTML = `<div style="color:var(--muted); font-size:13px; line-height:1.6;">
          No projects match your filter/search.<br/>
          <a class="btn" style="margin-top:10px" href="#" onclick="resetWork(); return false;">Reset</a>
        </div>`;
        grid.appendChild(empty);
        return;
      }

      visible.forEach(p => grid.appendChild(createTile(p)));
    }

    // ====== Filters/Search/View ======
    function setFilter(filterName){
      currentFilter = filterName;
      document.querySelectorAll('.filterBtn[data-filter]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.filter === filterName);
      });
      render();
      const work = document.getElementById('work');
      if (work) work.scrollIntoView({behavior:'smooth', block:'start'});
    }
    window.setFilter = setFilter;

    function setSearch(v){
      searchQuery = v || '';
      render();
    }
    window.setSearch = setSearch;

    function toggleView(){
      viewMode = viewMode === 'grid' ? 'list' : 'grid';
      render();
    }
    window.toggleView = toggleView;

    function resetWork(){
      currentFilter = 'All';
      searchQuery = '';
      const input = document.getElementById('searchInput');
      if (input) input.value = '';
      document.querySelectorAll('.filterBtn[data-filter]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.filter === 'All');
      });
      render();
    }
    window.resetWork = resetWork;

    // ====== Modal ======
    let modalProjectId = null;

    function openModal(p){
      modalProjectId = p.id;
      document.getElementById('mTitle').textContent = p.title;
      document.getElementById('mSubtitle').textContent = `${p.category} • ${(p.tags||[]).slice(0,3).join(' • ')}`;
      document.getElementById('mBody').textContent = p.body || '';

      const ul = document.getElementById('mBullets');
      ul.innerHTML = '';
      (p.bullets || []).forEach(b => {
        const li = document.createElement('li');
        li.textContent = b;
        ul.appendChild(li);
      });

      const links = document.getElementById('mLinks');
      links.innerHTML = '';
      (p.links || []).forEach(l => {
        const a = document.createElement('a');
        a.className = 'btn';
        a.href = l.url || '#';
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.textContent = l.label;
        if (!l.url || l.url === '#'){
          a.addEventListener('click', (e) => {
            e.preventDefault();
            alert('Replace this placeholder link with your real URL in the PROJECTS array.');
          });
        }
        links.appendChild(a);
      });

      if (p.embed){
        mediaHero.style.display = 'none';
        mediaEmbed.style.display = 'block';
        mediaEmbed.src = p.embed;
      } else {
        mediaEmbed.src = '';
        mediaEmbed.style.display = 'none';
        mediaHero.style.display = 'block';
      }

      updateModalNavButtons();

      modalBack.classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    function closeModal(){
      modalBack.classList.remove('show');
      document.body.style.overflow = '';
      mediaEmbed.src = '';
      modalProjectId = null;
    }
    window.closeModal = closeModal;

    function backdropClose(e){
      if (e.target === modalBack) closeModal();
    }
    window.backdropClose = backdropClose;

    function modalSequence(){
      // navigate within the currently visible set (filter + search)
      return visibleProjects().map(p => p.id);
    }

    function updateModalNavButtons(){
      const seq = modalSequence();
      const i = seq.indexOf(modalProjectId);
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      if (!prevBtn || !nextBtn) return;
      prevBtn.disabled = (i <= 0);
      nextBtn.disabled = (i === -1 || i >= seq.length - 1);
      prevBtn.style.opacity = prevBtn.disabled ? .45 : 1;
      nextBtn.style.opacity = nextBtn.disabled ? .45 : 1;
    }

    function openPrev(){
      const seq = modalSequence();
      const i = seq.indexOf(modalProjectId);
      if (i > 0){
        const p = PROJECTS.find(x => x.id === seq[i-1]);
        if (p) openModal(p);
      }
    }
    function openNext(){
      const seq = modalSequence();
      const i = seq.indexOf(modalProjectId);
      if (i !== -1 && i < seq.length - 1){
        const p = PROJECTS.find(x => x.id === seq[i+1]);
        if (p) openModal(p);
      }
    }
    window.openPrev = openPrev;
    window.openNext = openNext;

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modalBack.classList.contains('show')) closeModal();
      if (modalBack.classList.contains('show')){
        if (e.key === 'ArrowLeft') openPrev();
        if (e.key === 'ArrowRight') openNext();
      }
    });

    // ====== Scrollspy for top nav ======
    const sections = ['work','thesis','about','contact'];
    const navLinks = Array.from(document.querySelectorAll('.nav a'));

    function setActiveNav(id){
      navLinks.forEach(a => {
        const href = a.getAttribute('href') || '';
        a.classList.toggle('active', href === `#${id}`);
      });
    }

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting){
          setActiveNav(entry.target.id);
        }
      });
    }, { root: null, rootMargin: '-40% 0px -55% 0px', threshold: 0.01 });

    sections.forEach(id => {
      const el = document.getElementById(id);
      if (el) observer.observe(el);
    });

    // ====== Init ======
    document.getElementById('year').textContent = new Date().getFullYear();
    render();
  </script>
</body>
</html>
